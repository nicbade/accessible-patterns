<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#121722" />
  <meta name="description" content="Accessible Patterns site shell with semantic landmarks, skip link, and responsive primary navigation following WAI-ARIA APG and WCAG 2.1 AA." />
  <title>Accessible Patterns — Site Shell</title>
  <!-- Optional: PicoCSS baseline (kept optional to avoid external dependency) -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"> -->
  <style>
    /* Page baseline (kept lean to avoid conflicts with frameworks like PicoCSS) */
    :root { --bg: #0c0f14; --surface: #121722; --surface-2:#0f1420; --text:#e9eef6; --muted:#a9b4c5; --accent:#2dd4bf; --accent-strong:#14b8a6; --link:#7dd3fc; --focus:#22d3ee; }
    html, body { height: 100%; }
    body { margin: 0; background: var(--bg); color: var(--text); font: 400 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    :focus-visible { outline: 3px solid var(--focus); outline-offset: 2px; }
    a { color: var(--link); }

    /* --- Pattern-scoped styles --- */
    .pattern[data-pattern="site-shell"] * { box-sizing: border-box; }

    /* Layout */
    .site-header, .site-footer { background: var(--surface); color: var(--text); }
    .site-header { display:flex; align-items:center; justify-content:space-between; gap:.5rem; padding: .75rem 1rem; position:sticky; top:0; z-index:10; border-bottom:1px solid #1f2a3a; }
    .brand { display:flex; align-items:center; }
    .site-logo { display:flex; align-items:center; gap:.5rem; text-decoration:none; color:var(--text); font-weight:600; }
    .logo-box { width:28px; height:28px; background: linear-gradient(135deg, var(--accent), var(--accent-strong)); border-radius:.5rem; display:inline-block; }
    .site-name { letter-spacing:.2px; }

    .menu-toggle { background:transparent; color:var(--text); border:1px solid #2a3447; padding:.5rem .75rem; border-radius:.75rem; display:flex; align-items:center; gap:.5rem; }
    .menu-toggle:hover { background: var(--surface-2); }

    .site-nav .nav-list { list-style:none; margin:0; padding:0; }
    .site-nav a { display:block; padding:.6rem .75rem; border-radius:.5rem; text-decoration:none; color:var(--text); }
    .site-nav a:hover { background: var(--surface-2); }
    .site-nav a[aria-current="page"] { color:var(--link); font-weight:600; }

    .site-main { background: var(--bg); color: var(--text); }
    .container { padding: 1.25rem; max-width: 1100px; margin: 0 auto; }
    .cards { list-style:none; padding:0; margin: 1rem 0 0; display:grid; grid-template-columns: repeat(12, 1fr); gap:1rem; }
    .card { grid-column: span 12; background: var(--surface); border:1px solid #1f2a3a; border-radius: 1rem; padding: 1rem; }
    .card h3 { margin-top:0; }
    .button { display:inline-block; margin-top:.5rem; background: var(--accent); color:#052e2b; padding:.5rem .75rem; border-radius:.6rem; text-decoration:none; font-weight:600; }
    .button:hover { background: var(--accent-strong); color:#031a19; }

    .site-footer { padding: 1rem; border-top:1px solid #1f2a3a; }
    .footer-links { display:flex; gap:.75rem; list-style:none; padding:0; margin:0 0 .5rem; flex-wrap:wrap; }
    .footer-links a { color: var(--muted); text-decoration:none; }
    .footer-links a:hover { color: var(--text); text-decoration: underline; }

    /* Skip link */
    .skip-link { position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden; }
    .skip-link:focus { position: static; width: auto; height: auto; padding:.5rem .75rem; background: var(--focus); color:#002b36; border-radius:.5rem; margin:.5rem; display:inline-block; }

    /* Responsive nav */
    .site-nav { position: relative; }
    @media (min-width: 768px) {
      .menu-toggle { display:none; }
      .site-nav .nav-list { display:flex !important; gap:.25rem; }
      .site-nav .nav-list[hidden] { display:flex !important; } /* keep visible on desktop */
    }
    @media (max-width: 767.98px) {
      .site-nav .nav-list { margin-top:.5rem; border-top:1px solid #1f2a3a; }
    }

    /* Grid for cards on wider screens */
    @media (min-width: 600px) { .card { grid-column: span 6; } }
    @media (min-width: 900px) { .card { grid-column: span 4; } }

    @media (prefers-reduced-motion: reduce) { * { transition: none !important; } }
    a, button { transition: background-color .2s ease, color .2s ease, border-color .2s ease; }
  </style>
</head>
<body>
  <div class="pattern" data-pattern="site-shell">
    <h3>Site Shell: Landmarks, Skip Link, Responsive Primary Navigation</h3>

    <div class="pattern-example">
      <!-- Skip link (always first focusable element) -->
      <a class="skip-link" href="#main">Skip to main content</a>

      <!-- Site Header (native header exposes the banner landmark; no redundant role) -->
      <header class="site-header">
        <div class="brand">
          <a href="/" class="site-logo" aria-label="Accessible Patterns Home">
            <span aria-hidden="true" class="logo-box"></span>
            <span class="site-name">Accessible Patterns</span>
          </a>
        </div>

        <!-- Mobile nav toggle (disclosure button) -->
        <button
          class="menu-toggle"
          aria-expanded="false"
          aria-controls="primary-nav"
          type="button"
        >
          <span class="icon" aria-hidden="true">☰</span>
          <span class="label">Menu</span>
        </button>

        <!-- Primary nav -->
        <nav class="site-nav" aria-label="Primary">
          <ul id="primary-nav" class="nav-list" hidden>
            <li><a href="/" aria-current="page">Home</a></li>
            <li><a href="#patterns">Patterns</a></li>
            <li><a href="#guidelines">Guidelines</a></li>
            <li><a href="#about">About</a></li>
          </ul>
        </nav>
      </header>

      <!-- Main content -->
      <main id="main" class="site-main">
        <section id="intro" class="container">
          <h1>Welcome</h1>
          <p>This scaffold establishes semantic landmarks, a responsive header/navigation, robust focus styles, and baseline color contrast. Add your pages inside <code>&lt;main&gt;</code>.</p>
        </section>

        <section id="patterns" class="container">
          <h2>Featured Patterns</h2>
          <ul class="cards">
            <li class="card">
              <h3>Disclosure</h3>
              <p>Simple show/hide details with a native control.</p>
              <a class="button" href="#0">View</a>
            </li>
            <li class="card">
              <h3>Tabs</h3>
              <p>Keyboard-accessible tab interface per APG.</p>
              <a class="button" href="#0">View</a>
            </li>
            <li class="card">
              <h3>Modal</h3>
              <p>Dialog with focus trap and inert background.</p>
              <a class="button" href="#0">View</a>
            </li>
          </ul>
        </section>

        <section id="guidelines" class="container">
          <h2>Guidelines</h2>
          <p>Favor native semantics, minimal ARIA, and strong focus visibility. Colors meet WCAG 2.1 AA contrast.</p>
        </section>
      </main>

      <!-- Footer -->
      <footer class="site-footer">
        <nav aria-label="Footer">
          <ul class="footer-links">
            <li><a href="#privacy">Privacy</a></li>
            <li><a href="#terms">Terms</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </nav>
        <p>&copy; <span id="year"></span> Accessible Patterns</p>
      </footer>
    </div>

    <h4>Accessibility features implemented</h4>
    <ul>
      <li>Landmarks: native <code>header</code>, <code>nav</code>, <code>main</code>, <code>footer</code>.</li>
      <li>Visible skip link as first focusable element.</li>
      <li>Mobile disclosure uses a native <code>button</code> with <code>aria-expanded</code>/<code>aria-controls</code>; menu visibility via <code>hidden</code>.</li>
      <li>High-contrast <code>:focus-visible</code> outlines (WCAG 2.1 AA).</li>
      <li>Keyboard support: Tab/Shift+Tab; Esc closes the open mobile menu.</li>
      <li>Respects <code>prefers-reduced-motion</code>; colors meet contrast targets.</li>
    </ul>
  </div>

  <script>
    (function () {
      // Year stamp in footer
      const y = document.getElementById('year');
      if (y) y.textContent = new Date().getFullYear();

      // Mobile menu toggle logic (disclosure pattern)
      const root = document.querySelector('.pattern[data-pattern="site-shell"]');
      const toggle = root?.querySelector('.menu-toggle');
      const list = document.getElementById('primary-nav');

      function openMenu() {
        toggle.setAttribute('aria-expanded', 'true');
        list.hidden = false;
      }
      function closeMenu() {
        toggle.setAttribute('aria-expanded', 'false');
        list.hidden = true;
      }
      function isOpen() {
        return toggle.getAttribute('aria-expanded') === 'true';
      }

      if (toggle && list) {
        toggle.addEventListener('click', () => {
          isOpen() ? closeMenu() : openMenu();
        });

        // Close with Escape when focus is within header/nav on small screens
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && isOpen()) {
            closeMenu();
            toggle.focus();
          }
        });

        // Close after activating a link (mobile)
        list.addEventListener('click', (e) => {
          const target = e.target;
          if (target && target.tagName === 'A' && window.matchMedia('(max-width: 767.98px)').matches) {
            closeMenu();
          }
        });

        // Ensure correct state on resize (progressive enhancement)
        const mq = window.matchMedia('(min-width: 768px)');
        const syncForViewport = () => {
          if (mq.matches) {
            // Show list and set expanded to true for clarity on desktop
            list.hidden = false;
            toggle.setAttribute('aria-expanded', 'true');
          } else {
            // Collapse on mobile by default
            closeMenu();
          }
        };
        (mq.addEventListener ? mq.addEventListener('change', syncForViewport) : mq.addListener(syncForViewport));
        syncForViewport();
      }
    })();
  </script>
</body>
</html>
